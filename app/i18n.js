"use client";

import { createContext, useContext, useEffect, useMemo, useState } from "react";

/** Diccionario completo de textos ES/EN */
const M = {
    es: {
        // T√≠tulos principales
        app_title: "Admin Disciplicando",
        language: "Idioma",
        spanish: "Espa√±ol",
        english: "Ingl√©s",

        // Navegaci√≥n
        panel: "Panel de administraci√≥n",
        home: "Inicio",
        dashboard: "Dashboard",
        users: "Usuarios",
        reassign: "Reasignar disc√≠pulo",
        series: "Series",
        reports: "Reportes",
        settings: "Configuraci√≥n",
        discipleshipTree: "√Årbol de Discipulado",
        userManagement: "Agregar y Validar",
        logout: "Salir",

        // Dashboard
        dashboardTitle: "Dashboard Din√°mico",
        dashboardSubtitle: "Panel con datos reales de Disciplicando",
        totalUsers: "Total Usuarios",
        admins: "Administradores",
        disciplers: "Disciplicadores",
        disciples: "Disc√≠pulos",
        approved: "Aprobados",
        pending: "Pendientes",
        registeredUsers: "Usuarios registrados",
        activeLeaders: "L√≠deres activos",
        inTraining: "En formaci√≥n",
        systemStatus: "Estado Actual del Sistema",
        registeredInPlatform: "Registrados en la plataforma",
        pendingApproval: "Pendientes de Aprobaci√≥n",
        requireAttention: "Requieren atenci√≥n",
        approvedUsers: "Usuarios Aprobados",
        readyToUse: "Listos para usar la app",
        quickActions: "Acciones R√°pidas",
        hierarchicalView: "Vista jer√°rquica con progreso",
        manageUsers: "Administrar Usuarios",
        viewAndApprove: "Ver y aprobar usuarios",
        moveDisciples: "Mover disc√≠pulos",
        manageContent: "Gestionar contenido",
        statistics: "Estad√≠sticas",
        updated: "Actualizado",
        update: "Actualizar",
        refresh: "Actualizar",
        admin: "Admin",
        loggingOut: "Saliendo...",
        exit: "Salir",

        // √Årbol de Discipulado
        discipleshipTreeTitle: "√Årbol de Discipulado",
        discipleshipTreeSubtitle: "Vista jer√°rquica con progreso de lecciones",
        expandAll: "Expandir Todo",
        collapseAll: "Colapsar Todo",
        zoom: "Zoom",
        heightAdjusted: "altura ajustada",
        progressLegend: "Leyenda de Progreso",
        excellent: "Excelente",
        good: "Bueno",
        regular: "Regular",
        needsAttention: "Necesita Atenci√≥n",
        noName: "Sin nombre",
        disciple_singular: "disc√≠pulo",
        disciples_plural: "disc√≠pulos",
        noDisciplersFound: "No se encontraron disciplicadores",
        loading: "Cargando",
        loadingTree: "Cargando √°rbol de discipulado...",

        // Adicionales para √Årbol de Discipulado
        discipler: "Disciplicador",
        disciple: "Disc√≠pulo",

        // Usuarios
        users_title: "Administrador de Usuarios",
        users_subtitle: "Administra usuarios, roles y permisos",
        all: "Todos",
        leaders: "Disciplicadores",
        disciples: "Disc√≠pulos",
        loading: "Cargando‚Ä¶",
        no_leaders: "No hay disciplicadores.",
        unassigned: "Disc√≠pulos sin mentor asignado",
        none: "Ninguno.",
        edit: "Editar",
        save: "Guardar",
        saving: "Guardando‚Ä¶",
        cancel: "Cancelar",
        approve: "Aprobar",
        reject: "Rechazar",
        viewProgress: "Ver Progreso",
        email: "Email",
        phone: "Tel√©fono",
        rol: "Rol",
        id: "ID",
        disciples_count: "disc√≠pulo(s)",
        users_sub: "Administra usuarios, busca y edita datos de contacto y rol.",
        search_ph: "Buscar nombre, email, tel√©fono o rol‚Ä¶",
        no_results: "No hay resultados.",
        no_name: "(sin nombre)",
        tree_title: "√Årbol de discipulado (referencia)",
        tree_sub: "Estructura actual por disciplicador ‚Üí disc√≠pulos.",
        error_save: "Error guardando usuario: ",
        notApproved: "No Aprobados",
        approved: "Aprovado",
        onlyAdmins: "Solo Admins",
        onlyDisciplers: "Solo Disciplicadores",
        onlyDisciples: "Solo Disc√≠pulos",
        usersList: "Lista de Usuarios",
        loadingUsers: "Cargando usuarios...",
        noUsersFound: "No se encontraron usuarios",
        noPhone: "Sin tel√©fono",
        noEmail: "Sin email",
        registered: "Registrado",
        approvedOn: "Aprobado",

        // Adicionales para Admin Users
        editUser: "Editar Usuario",
        userProgress: "Progreso del Usuario",
        changeRole: "Cambiar Rol",
        searchPlaceholder: "Buscar por nombre, username, email, tel√©fono...",
        filterAll: "Todos",
        filterPending: "No Aprobados",
        filterApproved: "Aprobados",
        filterAdmins: "Solo Admins",
        filterDisciplers: "Solo Disciplicadores",
        filterDisciples: "Solo Disc√≠pulos",
        total: "Total",
        withoutMentor: "Sin mentor",
        completed: "Complet√≥",
        quizAverage: "Quiz Promedio",
        videosSeen: "Videos Vistos",
        noProgress: "No hay prograso registrado a√∫n",

        // User Management (Agregar y Validar)
        addNewUser: "Agregar Nuevo Usuario",
        validateCompetencies: "Validar Competencias",
        forProvenDisciplers: "Para disciplicadores probados",
        importMultiple: "Importar M√∫ltiples",
        fromCSVExcel: "Desde CSV o Excel",
        allUsers: "Todos los Usuarios",
        allStates: "Todos los estados",
        validated: "Validados",
        noValidated: "Si Validar",
        lesson: "Lecci√≥n",
        progress: "Progreso",
        dateAdded: "Fecha Ingreso",
        user: "Usuario",

        // Modal Agregar Usuario
        basicInfo: "Informaci√≥n B√°sica",
        fullName: "Nombre Completo",
        assignment: "Asignaci√≥n",
        selectDiscipler: "Seleccionar disciplicador...",
        canAssignLater: "Puedes asignarlo despu√©s si no est√°s seguro",
        validationForProven: "Validaci√≥n para Disciplicador Probado",
        provenDisciplerText: "Si esta persona ya es un disciplicador con experiencia, puedes validar autom√°ticamente la Serie 1.",
        validateSeries1: "Validar Serie 1 completa (Certificaci√≥n como Disciplicador)",
        notes: "Notas",
        notesOptional: "Notas (Opcional)",
        notesPlaceholder: "Ej: Pastor de iglesia local, 10 a√±os de experiencia...",
        invitationMethod: "M√©todo de Invitaci√≥n",
        sendEmailInvite: "Enviar invitaci√≥n por email",
        sendWhatsAppInvite: "Enviar invitaci√≥n por WhatsApp",
        createDirectly: "Crear cuenta directamente (sin invitaci√≥n)",
        addUser: "Agregar Usuario",

        // Modal Validar Competencias
        selectUser: "Seleccionar Usuario",
        selectUserPlaceholder: "Seleccionar...",
        currentLesson: "Lecci√≥n actual",
        validateCompletesSeries: "Validar Series Completas",
        certificationLevel: "Nivel de Certificaci√≥n",
        noCertification: "Sin certificaci√≥n",
        certifiedDiscipler: "Disciplicador Certificado",
        advancedDiscipler: "Disciplicador Avanzado",
        masterDiscipler: "Disciplicador Master",
        certificationNote1: "Complet√≥ Serie 1",
        certificationNote2: "Complet√≥ Series 1 y 2",
        certificationNote3: "Complet√≥ todas las series",
        validationNotes: "Notas de Validaci√≥n",
        validationNotesPlaceholder: "Ej: Pastor con 15 a√±os de experiencia, ya ha discipulado a 20+ personas...",
        validateCompetencies: "Validar Competencias",

        // Tips
        tipsTitle: "Tips para la Gesti√≥n de Usuarios",
        tip1: "Para disciplicadores experimentados:",
        tip1Text: "Usa 'Validar Competencias' para marcar la Serie 1 como completa autom√°ticamente.",
        tip2: "Invitaciones:",
        tip2Text: "Los usuarios recibir√°n un link √∫nico para crear su contrase√±a y acceder por primera vez.",
        tip3: "Asignaci√≥n flexible:",
        tip3Text: "Puedes crear usuarios sin asignar disciplicador inmediatamente y hacerlo despu√©s en 'Reasignar'.",
        tip4: "Importaci√≥n masiva:",
        tip4Text: "Para agregar muchos usuarios a la vez, usa la opci√≥n de importar desde CSV con formato: nombre, email, tel√©fono, rol.",

        // Reassign (Reasignar)
        reassignDisciples: "Reasignar Disc√≠pulos",
        reassignSubtitle: "Arrastra y suelta disc√≠pulos entre disciplicadores para reasignarlos",
        dragAndDrop: "Arrastra y suelta para reasignar",
        withoutAssigned: "Sin Asignar",
        confirmReassignment: "Confirmar Reasignaci√≥n",
        confirmReassignText: "¬øEst√°s seguro de que quieres reasignar a:",
        from: "De",
        to: "A",
        confirming: "Confirmando...",
        reassigning: "Reasignando...",
        disciplersWithDisciples: "Disciplicadores y sus Disc√≠pulos",
        noDisciplersAvailable: "No hay disciplicadores disponibles",
        dropHereToAssign: "Suelta aqu√≠ para asignar",
        searchDisciples: "Buscar disc√≠pulos por nombre o email...",
        assigned: "Asignados",

        // Series
        seriesTitle: "Series de Estudio",
        seriesSubtitle: "Gestiona las series, bloques y lecciones",
        newSeries: "Nueva Serie",
        editSeries: "Editar Serie",
        newBlock: "Nuevo Bloque",
        editBlock: "Editar Bloque",
        newLesson: "Nueva Lecci√≥n",
        editLesson: "Editar Lecci√≥n",
        blocks: "Bloques",
        lessons: "Lecciones",
        totalLessons: "lecciones totales",
        totalBlocks: "bloques",
        inactive: "Inactiva",
        active: "Activa",
        addBlock: "Agregar Bloque",
        noBlocks: "No hay bloques en esta serie",
        addLesson: "Agregar Lecci√≥n",
        noLessons: "No hay lecciones en este bloque",

        // Series - adicionales
        loadingSeries: "Cargando series...",
        spanish: "Espa√±ol",
        english: "Ingl√©s",
        seriesName: "Nombre",
        seriesDescription: "Descripci√≥n",
        blockName: "Nombre",
        lessonTitle: "T√≠tulo",
        lessonNumber: "N√∫mero de lecci√≥n",
        lessonResources: "Recursos de la Lecci√≥n",
        videoUrl: "URL del Video (YouTube no listado)",
        podcastUrl: "URL del Podcast (Audio)",
        studyUrl: "URL del Estudio B√≠blico",
        quizUrl: "URL del Quiz/Cuestionario",
        minScoreToPass: "% M√≠nimo para aprobar quiz",
        additionalNotes: "Notas o contenido adicional (opcional)",

        // Series - lecturas adicionales
        lessonText1: "El disc√≠pulo tendr√° acceso a estos 4 recursos. Si alguno no est√° disponible, se mostrar√° deshabilitado.",
        lessonText2: "Video explicativo de la lecci√≥n.",
        lessonText3: "Versi√≥n en audio/podcast para quienes prefieran escuchar. Opcional - se mostr√≥ la gris y no est√° disponible.",
        lessonText4: "Estudio escrito que pueden completar, imprimir o enviar por email",
        lessonText5a: "Evaluaci√≥n final - requiere",
        lessonText5b: "para aprobar y notificar al disciplicador.",

        // Gu√≠as de Estudio
        bible_guides: "Gu√≠as de Estudio",
        bible_guides_subtitle: "Gestiona las gu√≠as para discipuladores",
        new_guide: "Nueva Gu√≠a",
        edit_guide: "Editar Gu√≠a",
        new_study_guide: "Nueva Gu√≠a de Estudio",
        title: "T√≠tulo",
        publication_date: "Fecha de Publicaci√≥n",
        biblical_text: "Texto B√≠blico",
        themes: "Temas (separados por coma)",
        description: "Descripci√≥n",
        pdf_file: "Archivo PDF",
        active_guide: "Gu√≠a activa (visible para discipuladores)",
        save: "Guardar",
        saving: "Guardando...",
        update: "Actualizar",
        cancel: "Cancelar",
        existing_guides: "Gu√≠as Existentes",
        no_guides_yet: "No hay gu√≠as de estudio todav√≠a",
        click_new_guide: "Haz clic en \"Nueva Gu√≠a\" para agregar una",
        active: "Activa",
        inactive: "Inactiva",
        confirm_delete_guide: "¬øEst√°s seguro de eliminar la gu√≠a",
        guide_deleted: "Gu√≠a eliminada exitosamente",
        guide_created: "Gu√≠a creada exitosamente",
        guide_updated: "Gu√≠a actualizada exitosamente",
        loading_guides: "Cargando gu√≠as...",

        series: "Series",
        bible_guides: "Gu√≠as de Estudio",
        bible_guides_subtitle: "Gestiona las gu√≠as para discipuladores",
        bible_guides_dashboard: "Material b√≠blico",
        reports: "Reportes",

        // P√°gina de Reportes - COMPLETO
        reports: "Reportes",
        reports_subtitle: "An√°lisis y m√©tricas del discipulado",
        this_week: "Esta Semana",
        this_month: "Este Mes",
        this_year: "Este A√±o",
        all_time: "Todo",
        export_btn: "Exportar",
        export_all_disciples: "Todos los Disc√≠pulos",
        export_disciplers_only: "Solo Disciplicadores",
        export_needs_attention: "Necesitan Atenci√≥n",
        export_active_only: "Solo Activos",

        // Tabs de reportes
        dashboard_tab: "Dashboard",
        progress_series1_tab: "Progreso Serie 1",
        disciplers_tab: "Disciplicadores",
        needs_attention_tab: "Necesitan Atenci√≥n",
        advanced_progress_tab: "Progreso Avanzado",

        // Estad√≠sticas del dashboard
        total_users_stat: "Total Usuarios",
        registered_users_desc: "Usuarios registrados",
        active_disciples_stat: "Disc√≠pulos Activos",
        avg_progress_desc: "progreso promedio",
        certified_disciplers_stat: "Disciplicadores",
        completed_first_series: "Completaron primera serie",
        needs_attention_count: "Necesitan Atenci√≥n",
        inactive_or_low: "Inactivos o bajo progreso",
        active_series_stat: "Series Activas",
        total_lessons_desc: "lecciones totales",
        completed_this_month_stat: "Completadas Este Mes",
        lessons_finished_desc: "Lecciones terminadas",
        avg_time_stat: "Tiempo Promedio",
        days_per_lesson_desc: "D√≠as por lecci√≥n",

        // Columnas de tabla
        name_column: "Nombre",
        discipler_column: "Disciplicador",
        current_series_column: "Serie Actual",
        progress_column: "Progreso",
        status_column: "Estado",
        actions_column: "Acciones",

        // Estados
        status_active: "Activo",
        status_ready: "Listo para discipular",
        status_inactive: "Inactivo",
        not_assigned: "Sin asignar",

        // Secci√≥n de progreso
        overall_progress_title: "Progreso General por Serie",
        active_users_count: "activos",
        completed_users_count: "completados",
        average_text: "promedio",
        no_progress_available: "No hay datos de progreso disponibles a√∫n",
        all_disciples_title: "Progreso de Todos los Disc√≠pulos",

        // Secci√≥n certificados
        certified_message: "üéâ Estos usuarios han completado la primera serie y est√°n certificados como disciplicadores.",
        certified_disciplers_title: "Disciplicadores Certificados",
        no_certified_yet: "No hay usuarios que hayan completado la primera serie a√∫n.",
        users_will_appear: "Los usuarios aparecer√°n aqu√≠ cuando completen todas las lecciones de \"Fundamentos De Nuestra Fe\"",

        // Secci√≥n atenci√≥n
        attention_message: "‚ö†Ô∏è Estos disc√≠pulos necesitan motivaci√≥n o seguimiento adicional.",
        require_attention_title: "Requieren Atenci√≥n",

        // Secci√≥n avanzada
        advanced_view_message: "üìö Vista completa del progreso en todas las series, incluyendo series opcionales y avanzadas.",
        filter_by_series: "Filtrar por Serie",
        filter_by_role: "Filtrar por Rol",
        all_series_option: "Todas las Series",
        all_roles_option: "Todos",
        disciples_only_option: "Solo Disc√≠pulos",
        studying_disciplers_option: "Disciplicadores Estudiando",
        required_label: "Requerida",
        required_for_discipling: "Requerida para Discipular",
        optional_label: "Opcional",
        blocks_text: "bloques",
        lessons_range: "Lecciones",
        active_users_text: "usuarios activos",
        no_active_in_series: "No hay usuarios activos en esta serie",
        users_appear_when: "Los usuarios aparecer√°n aqu√≠ cuando comiencen las lecciones",

        // Leyenda
        progress_legend: "Leyenda de Progreso:",
        excellent_level: "Excelente",
        good_level: "Bueno",
        regular_level: "Regular",
        needs_attention_level: "Necesita Atenci√≥n",

        // Cargando
        loading_reports_text: "Cargando reportes...",

        // Comunes
        yes: "S√≠",
        no: "No",
        and: "y",
        confirm: "Confirmar",
        delete: "Eliminar",
        close: "Cerrar",
        search: "Buscar",
        filter: "Filtrar",
        actions: "Acciones",
        status: "Estado",
        active: "Activo",
        name: "Nombre",
        description: "Descripci√≥n",
        order: "Orden",
        createdAt: "Creado",
        updatedAt: "Actualizado",

        // Configuraci√≥n - Sesi√≥n
        sessionSettings: "Configuraci√≥n de Sesi√≥n",
        sessionTimeout: "Tiempo de sesi√≥n",
        inactivityTimeout: "Tiempo de inactividad (minutos)",
        inactivityTimeoutDesc: "Cerrar sesi√≥n autom√°ticamente despu√©s de este tiempo sin actividad",
        maxSessionTime: "Duraci√≥n m√°xima de sesi√≥n (horas)",
        maxSessionTimeDesc: "Tiempo m√°ximo que una sesi√≥n puede estar activa",
        warningTime: "Aviso antes de cerrar (minutos)",
        warningTimeDesc: "Mostrar advertencia antes de cerrar sesi√≥n autom√°ticamente",
        sessionNote: "Nota: Estos ajustes son locales. Para cambios permanentes, configurar JWT en Supabase.",

        // Confirmaciones
        confirmLogout: "¬øEst√°s seguro de que quieres cerrar sesi√≥n?",
        confirmDelete: "¬øEst√°s seguro de eliminar este elemento?",
        confirmReject: "¬øEst√°s seguro de rechazar este usuario?",

        // Configuraci√≥n - T√≠tulos principales
        settings: "Configuraci√≥n",
        settingsSubtitle: "Administra todos los aspectos de tu aplicaci√≥n",

        // Secciones de configuraci√≥n
        generalSection: "General",
        generalSectionDesc: "Configuraci√≥n b√°sica de la aplicaci√≥n: nombre, zona horaria, idioma principal",
        securitySection: "Seguridad",
        securitySectionDesc: "Control de acceso, autenticaci√≥n, pol√≠ticas de contrase√±as y permisos",
        databaseSection: "Base de Datos",
        databaseSectionDesc: "Respaldos autom√°ticos, mantenimiento y optimizaci√≥n de datos",
        notificationsSection: "Notificaciones",
        notificationsSectionDesc: "Configurar qu√© tipos de notificaciones enviar y cu√°ndo",
        communicationsSection: "Comunicaciones",
        communicationsSectionDesc: "Proveedores de email, SMS y WhatsApp para enviar mensajes",
        appearanceSection: "Apariencia",
        appearanceSectionDesc: "Personalizaci√≥n visual: colores, logos, temas",

        // General
        generalConfig: "Configuraci√≥n General",
        generalConfigDesc: "Ajustes b√°sicos que afectan a toda la aplicaci√≥n",
        appName: "Nombre de la Aplicaci√≥n",
        appNameDesc: "Aparece en emails y notificaciones",
        mainLanguage: "Idioma Principal",
        mainLanguageDesc: "Idioma por defecto para nuevos usuarios",
        timezone: "Zona Horaria",
        timezoneDesc: "Afecta horarios de reportes y notificaciones autom√°ticas",
        timezonesTip: "Tip sobre zonas horarias",
        timezonesTipText: "Memphis est√° en zona Central (CST/CDT). Honduras tambi√©n usa CST pero sin horario de verano. La mayor√≠a de Centroam√©rica est√° en CST permanente.",

        // Zonas horarias
        unitedStates: "Estados Unidos",
        latinAmerica: "Latinoam√©rica",
        eastern: "Este",
        central: "Central",
        mountain: "Monta√±a",
        pacific: "Pac√≠fico",

        // Seguridad
        securityConfig: "Configuraci√≥n de Seguridad",
        securityConfigDesc: "Protege las cuentas y datos de tus usuarios",
        authentication: "Autenticaci√≥n",
        requireTwoFactor: "Requerir autenticaci√≥n de dos factores para admins",
        sessionTime: "Tiempo de sesi√≥n (minutos)",
        sessionTimeDesc: "Cierra sesi√≥n tras inactividad",
        passwordPolicies: "Pol√≠ticas de Contrase√±as",
        minPasswordLength: "Longitud m√≠nima",
        requireSpecialChars: "Requerir caracteres especiales (!@#$%)",
        accessLevels: "Niveles de acceso actuales",
        adminAccess: "Control total del sistema",
        disciplerAccess: "Gestiona sus disc√≠pulos",
        discipleAccess: "Solo ve su progreso",

        // Base de datos
        databaseTitle: "Base de Datos",
        databaseDesc: "Respaldos y mantenimiento de datos",
        autoBackups: "Respaldos Autom√°ticos",
        enableAutoBackup: "Activar respaldos autom√°ticos",
        backupFrequency: "Frecuencia de respaldo",
        hourly: "Cada hora",
        daily: "Diario",
        weekly: "Semanal",
        monthly: "Mensual",
        retentionDays: "Retenci√≥n de respaldos (d√≠as)",
        retentionDesc: "Los respaldos m√°s antiguos se eliminar√°n autom√°ticamente",
        manualActions: "Acciones Manuales",
        downloadBackup: "Descargar Respaldo",
        restoreBackup: "Restaurar Respaldo",
        supabaseInfo: "Informaci√≥n de Supabase",
        supabaseInfoText: "Tu base de datos est√° alojada en Supabase con respaldos autom√°ticos diarios incluidos. Los respaldos adicionales aqu√≠ son para mayor seguridad.",

        // Notificaciones
        notifications: "Notificaciones",
        notificationsTitle: "Notificaciones",
        notificationsDesc: "Configura cu√°ndo y c√≥mo notificar a los usuarios",
        notificationChannels: "Canales de Notificaci√≥n",
        emailChannel: "Email",
        smsChannel: "SMS",
        whatsappChannel: "WhatsApp",
        pushChannel: "Notificaciones Push (App m√≥vil)",
        notificationTypes: "Tipos de Notificaciones",
        newLessonAvailable: "Nueva lecci√≥n disponible",
        activityReminder: "Recordatorio de actividad pendiente",
        lessonCompleted: "Felicitaci√≥n por completar lecci√≥n",
        messageFromDiscipler: "Mensaje del disciplicador",
        weeklyProgressSummary: "Resumen semanal de progreso",

        // Gesti√≥n de Notificaciones
        notificationsManagement: "Gesti√≥n de Notificaciones",
        notificationsManagementDesc: "Crea, edita y gestiona notificaciones para los usuarios",
        newNotification: "Nueva Notificaci√≥n",
        editNotification: "Editar Notificaci√≥n",
        searchNotifications: "Buscar notificaciones...",
        allAudience: "Toda la audiencia",
        allCountries: "Todos los pa√≠ses",
        allPriorities: "Todas las prioridades",
        allLanguages: "Todos los idiomas",
        urgent: "Urgente",
        high: "Alta",
        normal: "Normal",
        low: "Baja",
        expires: "Expira",
        notificationTitlePlaceholder: "T√≠tulo de la notificaci√≥n",
        notificationMessagePlaceholder: "Mensaje de la notificaci√≥n",
        type: "Tipo",
        text: "Texto",
        video: "Video",
        audio: "Audio",
        videoUrl: "URL del Video",
        audioUrl: "URL del Audio",
        audience: "Audiencia",
        priority: "Prioridad",
        country: "Pa√≠s",
        optional: "Opcional",
        expirationDate: "Fecha de Expiraci√≥n",
        assignToUsers: "Asignar a usuarios espec√≠ficos",
        selectMultipleUsers: "Mant√©n presionado Ctrl/Cmd para seleccionar m√∫ltiples usuarios",
        notificationsList: "Lista de Notificaciones",
        noNotifications: "No hay notificaciones",
        notificationSaved: "Notificaci√≥n guardada exitosamente",
        notificationDeleted: "Notificaci√≥n eliminada",
        confirmDeleteNotification: "¬øEliminar esta notificaci√≥n?",
        errorLoadingNotifications: "Error cargando notificaciones",
        errorSavingNotification: "Error guardando notificaci√≥n",
        errorDeletingNotification: "Error eliminando notificaci√≥n",
        inactive: "Inactiva",

        // Comunicaciones
        communicationProviders: "Proveedores de Comunicaci√≥n",
        communicationProvidersDesc: "Servicios externos para enviar mensajes",
        emailProvider: "Proveedor",
        apiKey: "API Key",
        customSMTP: "SMTP Personalizado",
        smsWhatsapp: "SMS y WhatsApp",
        accountSID: "Account SID",
        authToken: "Auth Token",
        whatsappBusinessNumber: "N√∫mero de WhatsApp Business",
        whatsappBusinessNumberDesc: "Debe estar verificado en WhatsApp Business API",

        // Apariencia
        appearanceTitle: "Apariencia",
        appearanceDesc: "Personaliza el aspecto visual de la aplicaci√≥n",
        theme: "Tema",
        darkMode: "Modo oscuro",
        primaryColor: "Color principal",
        logo: "Logo",
        changeLogo: "Cambiar Logo",
        logoRecommendation: "Recomendado: 512x512px, formato PNG con fondo transparente",

        // Botones y acciones
        saveChanges: "Guardar Cambios",
        saving: "Guardando...",
        saved: "Guardado",
        changesWillApply: "Los cambios se aplicar√°n inmediatamente",

        // Comunes de configuraci√≥n
        minutes: "minutos",
        hours: "horas",
        days: "d√≠as",
        enabled: "Activado",
        disabled: "Desactivado",
        select: "Seleccionar",
        configure: "Configurar",
        test: "Probar",
        testConnection: "Probar conexi√≥n",

        quizzes: "Quizzes",
        manageQuizzes: "Gestionar evaluaciones",

        // Estudios Biblicos
        bible_studies: "Estudios B√≠blicos",
        interactive_guides: "Gu√≠as Interactivas",
        bible_studies_subtitle: "Gestiona las gu√≠as de estudio interactivas para cada lecci√≥n",
        create_new_study: "Crear Nuevo Estudio",
        total_lessons: "Total Lecciones",
        with_study: "Con Estudio",
        pending_studies: "Pendientes",
        bilingual: "Biling√ºe",
        search_lesson: "Buscar lecci√≥n por t√≠tulo o n√∫mero...",
        expand_all: "Expandir Todo",
        collapse_all: "Colapsar Todo",
        main_series: "Serie Principal",
        series_word: "Serie",
        lessons_word: "lecciones",
        with_study_count: "con estudio",
        no_lessons_series: "No hay lecciones en esta serie",
        study_complete: "Completo",
        study_external: "Externo",
        no_study: "Sin estudio",
        create_study: "Crear/Editar Estudio",
        study_preview: "Vista Previa del Estudio",

    },

    en: {
        // Main titles
        app_title: "Disciplicando Admin",
        language: "Language",
        spanish: "Spanish",
        english: "English",

        // Navigation
        panel: "Admin Panel",
        home: "Home",
        dashboard: "Dashboard",
        users: "Users",
        reassign: "Reassign disciple",
        series: "Series",
        reports: "Reports",
        settings: "Settings",
        discipleshipTree: "Discipleship Tree",
        userManagement: "Add & Validate",
        logout: "Logout",

        // Dashboard
        dashboardTitle: "Dynamic Dashboard",
        dashboardSubtitle: "Panel with real Disciplicando data",
        totalUsers: "Total Users",
        admins: "Admins",
        disciplers: "Disciplyers",
        disciples: "Disciples",
        approved: "Approved",
        pending: "Pending",
        registeredUsers: "Registered users",
        activeLeaders: "Active leaders",
        inTraining: "In training",
        systemStatus: "Current System Status",
        registeredInPlatform: "Registered in platform",
        pendingApproval: "Pending Approval",
        requireAttention: "Require attention",
        approvedUsers: "Approved Users",
        readyToUse: "Ready to use the app",
        quickActions: "Quick Actions",
        hierarchicalView: "Hierarchical view with progress",
        manageUsers: "Manage Users",
        viewAndApprove: "View and approve users",
        moveDisciples: "Move disciples",
        manageContent: "Manage content",
        statistics: "Statistics",
        updated: "Updated",
        update: "Update",
        refresh: "Refresh",
        admin: "Admin",
        loggingOut: "Logging out...",
        exit: "Exit",

        // Discipleship Tree
        discipleshipTreeTitle: "Discipleship Tree",
        discipleshipTreeSubtitle: "Hierarchical view with lesson progress",
        expandAll: "Expand All",
        collapseAll: "Collapse All",
        zoom: "Zoom",
        heightAdjusted: "height adjusted",
        progressLegend: "Progress Legend",
        excellent: "Excellent",
        good: "Good",
        regular: "Regular",
        needsAttention: "Needs Attention",
        noName: "No name",
        disciple_singular: "disciple",
        disciples_plural: "disciples",
        noDisciplersFound: "No disciplers found",
        loading: "Loading",
        loadingTree: "Loading discipleship tree...",

        // Additional for Discipleship Tree
        discipler: "Disciplyer",
        disciple: "Disciple",

        // Users
        users_title: "User Management",
        users_subtitle: "Manage users, roles and permissions",
        all: "All",
        leaders: "Disciplers",
        disciples: "Disciples",
        loading: "Loading‚Ä¶",
        no_leaders: "No disciplers.",
        unassigned: "Disciples without mentor",
        none: "None.",
        edit: "Edit",
        save: "Save",
        saving: "Saving‚Ä¶",
        cancel: "Cancel",
        approve: "Approve",
        reject: "Reject",
        viewProgress: "View Progress",
        email: "Email",
        phone: "Phone",
        rol: "Role",
        id: "ID",
        disciples_count: "disciple(s)",
        users_sub: "Manage users, search and edit contact/role info.",
        search_ph: "Search name, email, phone or role‚Ä¶",
        no_results: "No results.",
        no_name: "(no name)",
        tree_title: "Discipleship tree (reference)",
        tree_sub: "Current structure by discipler ‚Üí disciples.",
        error_save: "Error saving user: ",
        notApproved: "Not Approved",
        approved: "Approved",
        onlyAdmins: "Admins Only",
        onlyDisciplers: "Disciplers Only",
        onlyDisciples: "Disciples Only",
        usersList: "Users List",
        loadingUsers: "Loading users...",
        noUsersFound: "No users found",
        noPhone: "No phone",
        noEmail: "No email",
        registered: "Registered",
        approvedOn: "Approved on",

        // Additional for Admin Users
        editUser: "Edit User",
        userProgress: "User Progress",
        changeRole: "Change Role",
        searchPlaceholder: "Search by name, username, email, phone...",
        filterAll: "All",
        filterPending: "Not Approved",
        filterApproved: "Approved",
        filterAdmins: "Admins Only",
        filterDisciplers: "Disciplers Only",
        filterDisciples: "Disciples Only",
        total: "Total",
        withoutMentor: "Without mentor",
        completed: "Completed",
        quizAverage: "Quiz Average",
        videosSeen: "Videos Seen",
        noProgress: "No progress recorded yet",

        // User Management (Add & Validate)
        addNewUser: "Add New User",
        validateCompetencies: "Validate Competencies",
        forProvenDisciplers: "For proven disciplers",
        importMultiple: "Import Multiple",
        fromCSVExcel: "From CSV or Excel",
        allUsers: "All Users",
        allStates: "All states",
        validated: "Validated",
        noValidated: "Unvalidated",
        lesson: "Lesson",
        progress: "Progress",
        dateAdded: "Date Added",
        user: "User",

        // Add User Modal
        basicInfo: "Basic Information",
        fullName: "Full Name",
        assignment: "Assignment",
        selectDiscipler: "Select discipler...",
        canAssignLater: "You can assign later if not sure",
        validationForProven: "Validation for Proven Discipler",
        provenDisciplerText: "If this person is already an experienced discipler, you can automatically validate Series 1.",
        validateSeries1: "Validate complete Series 1 (Certification as Discipler)",
        notes: "Notes",
        notesOptional: "Notes (Optional)",
        notesPlaceholder: "E.g.: Local church pastor, 10 years of experience...",
        invitationMethod: "Invitation Method",
        sendEmailInvite: "Send email invitation",
        sendWhatsAppInvite: "Send WhatsApp invitation",
        createDirectly: "Create account directly (no invitation)",
        addUser: "Add User",

        // Validate Competencies Modal
        selectUser: "Select User",
        selectUserPlaceholder: "Select...",
        currentLesson: "Current lesson",
        validateCompletesSeries: "Validate Complete Series",
        certificationLevel: "Certification Level",
        noCertification: "No certification",
        certifiedDiscipler: "Certified Discipler",
        advancedDiscipler: "Advanced Discipler",
        masterDiscipler: "Master Discipler",
        certificationNote1: "Completed Series 1",
        certificationNote2: "Completed Series 1 and 2",
        certificationNote3: "Completed all series",
        validationNotes: "Validation Notes",
        validationNotesPlaceholder: "E.g.: Pastor with 15 years of experience, has discipled 20+ people...",
        validateCompetencies: "Validate Competencies",

        // Tips
        tipsTitle: "Tips for User Management",
        tip1: "For experienced disciplers:",
        tip1Text: "Use 'Validate Competencies' to automatically mark Series 1 as complete.",
        tip2: "Invitations:",
        tip2Text: "Users will receive a unique link to create their password and access for the first time.",
        tip3: "Flexible assignment:",
        tip3Text: "You can create users without assigning a discipler immediately and do it later in 'Reassign'.",
        tip4: "Bulk import:",
        tip4Text: "To add many users at once, use the import from CSV option with format: name, email, phone, role.",

        // Reassign
        reassignDisciples: "Reassign Disciples",
        reassignSubtitle: "Drag and drop disciples between disciplers to reassign them",
        dragAndDrop: "Drag and drop to reassign",
        withoutAssigned: "Unassigned",
        confirmReassignment: "Confirm Reassignment",
        confirmReassignText: "Are you sure you want to reassign:",
        from: "From",
        to: "To",
        confirming: "Confirming...",
        reassigning: "Reassigning...",
        disciplersWithDisciples: "Disciplers and their Disciples",
        noDisciplersAvailable: "No disciplers available",
        dropHereToAssign: "Drop here to assign",
        searchDisciples: "Search disciples by name or email...",
        assigned: "Assigned",

        // Series
        seriesTitle: "Study Series",
        seriesSubtitle: "Manage series, blocks and lessons",
        newSeries: "New Series",
        editSeries: "Edit Series",
        newBlock: "New Block",
        editBlock: "Edit Block",
        newLesson: "New Lesson",
        editLesson: "Edit Lesson",
        blocks: "Blocks",
        lessons: "Lessons",
        totalLessons: "total lessons",
        totalBlocks: "total blocks",
        inactive: "Inactive",
        active: "Active",
        addBlock: "Add Block",
        noBlocks: "No blocks in this series",
        addLesson: "Add Lesson",
        noLessons: "No lessons in this block",

        // Series - additional
        loadingSeries: "Loading series...",
        spanish: "Spanish",
        english: "English",
        seriesName: "Name",
        seriesDescription: "Description",
        blockName: "Name",
        lessonTitle: "Title",
        lessonNumber: "Lesson number",
        lessonResources: "Lesson Resources",
        videoUrl: "Video URL (Unlisted YouTube)",
        podcastUrl: "Podcast URL (Audio)",
        studyUrl: "Bible Study URL",
        quizUrl: "Quiz/Questionnaire URL",
        minScoreToPass: "Minimum % to pass quiz",
        additionalNotes: "Additional notes or content (optional)",

        // Series - additional text
        lessonText1: "The disciple will have access to these 4 resources. If one is not available, it will be disabled.",
        lessonText2: "Lesson (video format).",
        lessonText3: "Lesson (audio/podcast).",
        lessonText4: "Lesson PDF format (downloadable, email)",
        lessonText5a: "Final evaluation - ",
        lessonText5b: "or greater required to pass and notify the disciplyer",

        // Gu√≠as de Estudio
        bible_guides: "Study Guides",
        bible_guides_subtitle: "Manage guides for disciplers",
        new_guide: "New Guide",
        edit_guide: "Edit Guide",
        new_study_guide: "New Study Guide",
        title: "Title",
        publication_date: "Publication Date",
        biblical_text: "Biblical Text",
        themes: "Themes (comma separated)",
        description: "Description",
        pdf_file: "PDF File",
        active_guide: "Active guide (visible to disciplers)",
        save: "Save",
        saving: "Saving...",
        update: "Update",
        cancel: "Cancel",
        existing_guides: "Existing Guides",
        no_guides_yet: "No study guides yet",
        click_new_guide: "Click \"New Guide\" to add one",
        active: "Active",
        inactive: "Inactive",
        confirm_delete_guide: "Are you sure you want to delete the guide",
        guide_deleted: "Guide deleted successfully",
        guide_created: "Guide created successfully",
        guide_updated: "Guide updated successfully",
        loading_guides: "Loading guides...",

        series: "Series",
        bible_guides: "Study Guides",
        bible_guides_subtitle: "Manage guides for disciplers",
        bible_guides_dashboard: "Biblical material",
        reports: "Reports",

        // Reports Page - COMPLETE
        reports: "Reports",
        reports_subtitle: "Analysis and discipleship metrics",
        this_week: "This Week",
        this_month: "This Month",
        this_year: "This Year",
        all_time: "All",
        export_btn: "Export",
        export_all_disciples: "All Disciples",
        export_disciplers_only: "Disciplers Only",
        export_needs_attention: "Need Attention",
        export_active_only: "Active Only",

        // Report tabs
        dashboard_tab: "Dashboard",
        progress_series1_tab: "Series 1 Progress",
        disciplers_tab: "Disciplyers",
        needs_attention_tab: "Need Attention",
        advanced_progress_tab: "Advanced Progress",

        // Dashboard stats
        total_users_stat: "Total Users",
        registered_users_desc: "Registered users",
        active_disciples_stat: "Active Disciples",
        avg_progress_desc: "average progress",
        certified_disciplers_stat: "Disciplyers",
        completed_first_series: "Completed first series",
        needs_attention_count: "Need Attention",
        inactive_or_low: "Inactive or low progress",
        active_series_stat: "Active Series",
        total_lessons_desc: "total lessons",
        completed_this_month_stat: "Completed This Month",
        lessons_finished_desc: "Lessons completed",
        avg_time_stat: "Average Time",
        days_per_lesson_desc: "Days per lesson",

        // Table columns
        name_column: "Name",
        discipler_column: "Disciplyer",
        current_series_column: "Current Series",
        progress_column: "Progress",
        status_column: "Status",
        actions_column: "Actions",

        // Status labels
        status_active: "Active",
        status_ready: "Ready to disciple",
        status_inactive: "Inactive",
        not_assigned: "Not assigned",

        // Progress section
        overall_progress_title: "Overall Progress by Series",
        active_users_count: "active",
        completed_users_count: "completed",
        average_text: "average",
        no_progress_available: "No progress data available yet",
        all_disciples_title: "All Disciples Progress",

        // Certified section
        certified_message: "üéâ These users have completed the first series and are certified as disciplers.",
        certified_disciplers_title: "Certified Disciplers",
        no_certified_yet: "No users have completed the first series yet.",
        users_will_appear: "Users will appear here when they complete all lessons from \"Foundations of Our Faith\"",

        // Attention section
        attention_message: "‚ö†Ô∏è These disciples need additional motivation or follow-up.",
        require_attention_title: "Require Attention",

        // Advanced section
        advanced_view_message: "üìö Complete view of progress across all series, including optional and advanced series.",
        filter_by_series: "Filter by Series",
        filter_by_role: "Filter by Role",
        all_series_option: "All Series",
        all_roles_option: "All",
        disciples_only_option: "Disciples Only",
        studying_disciplers_option: "Studying Disciplers",
        required_label: "Required",
        required_for_discipling: "Required to Disciple",
        optional_label: "Optional",
        blocks_text: "blocks",
        lessons_range: "Lessons",
        active_users_text: "active users",
        no_active_in_series: "No active users in this series",
        users_appear_when: "Users will appear here when they start lessons",

        // Legend
        progress_legend: "Progress Legend:",
        excellent_level: "Excellent",
        good_level: "Good",
        regular_level: "Regular",
        needs_attention_level: "Needs Attention",

        // Loading
        loading_reports_text: "Loading reports...",

        // Common
        yes: "Yes",
        no: "No",
        and: "and",
        confirm: "Confirm",
        delete: "Delete",
        close: "Close",
        search: "Search",
        filter: "Filter",
        actions: "Actions",
        status: "Status",
        active: "Active",
        name: "Name",
        description: "Description",
        order: "Order",
        createdAt: "Created",
        updatedAt: "Updated",

        // Settings - Session
        sessionSettings: "Session Settings",
        sessionTimeout: "Session Timeout",
        inactivityTimeout: "Inactivity timeout (minutes)",
        inactivityTimeoutDesc: "Automatically logout after this time without activity",
        maxSessionTime: "Maximum session duration (hours)",
        maxSessionTimeDesc: "Maximum time a session can be active",
        warningTime: "Warning before logout (minutes)",
        warningTimeDesc: "Show warning before automatic logout",
        sessionNote: "Note: These settings are local. For permanent changes, configure JWT in Supabase.",

        // Confirmations
        confirmLogout: "Are you sure you want to logout?",
        confirmDelete: "Are you sure you want to delete this item?",
        confirmReject: "Are you sure you want to reject this user?",

        // Settings - Main titles
        settings: "Settings",
        settingsSubtitle: "Manage all aspects of your application",

        // Settings sections
        generalSection: "General",
        generalSectionDesc: "Basic application settings: name, timezone, main language",
        securitySection: "Security",
        securitySectionDesc: "Access control, authentication, password policies and permissions",
        databaseSection: "Database",
        databaseSectionDesc: "Automatic backups, maintenance and data optimization",
        notificationsSection: "Notifications",
        notificationsSectionDesc: "Configure what notifications to send and when",
        communicationsSection: "Communications",
        communicationsSectionDesc: "Email, SMS and WhatsApp providers for sending messages",
        appearanceSection: "Appearance",
        appearanceSectionDesc: "Visual customization: colors, logos, themes",

        // General
        generalConfig: "General Settings",
        generalConfigDesc: "Basic settings that affect the entire application",
        appName: "Application Name",
        appNameDesc: "Appears in emails and notifications",
        mainLanguage: "Main Language",
        mainLanguageDesc: "Default language for new users",
        timezone: "Timezone",
        timezoneDesc: "Affects report schedules and automatic notifications",
        timezonesTip: "Timezone tip",
        timezonesTipText: "Memphis is in Central Time (CST/CDT). Honduras also uses CST but without daylight saving time. Most of Central America is on permanent CST.",

        // Timezones
        unitedStates: "United States",
        latinAmerica: "Latin America",
        eastern: "Eastern",
        central: "Central",
        mountain: "Mountain",
        pacific: "Pacific",

        // Security
        securityConfig: "Security Settings",
        securityConfigDesc: "Protect your users' accounts and data",
        authentication: "Authentication",
        requireTwoFactor: "Require two-factor authentication for admins",
        sessionTime: "Session time (minutes)",
        sessionTimeDesc: "Auto-logout after inactivity",
        passwordPolicies: "Password Policies",
        minPasswordLength: "Minimum length",
        requireSpecialChars: "Require special characters (!@#$%)",
        accessLevels: "Current access levels",
        adminAccess: "Full system control",
        disciplerAccess: "Manages their disciples",
        discipleAccess: "Only sees their progress",

        // Database
        databaseTitle: "Database",
        databaseDesc: "Backups and data maintenance",
        autoBackups: "Automatic Backups",
        enableAutoBackup: "Enable automatic backups",
        backupFrequency: "Backup frequency",
        hourly: "Hourly",
        daily: "Daily",
        weekly: "Weekly",
        monthly: "Monthly",
        retentionDays: "Backup retention (days)",
        retentionDesc: "Older backups will be automatically deleted",
        manualActions: "Manual Actions",
        downloadBackup: "Download Backup",
        restoreBackup: "Restore Backup",
        supabaseInfo: "Supabase Information",
        supabaseInfoText: "Your database is hosted on Supabase with included daily automatic backups. Additional backups here are for extra security.",

        // Notifications
        notifications: "Notifications",
        notificationsTitle: "Notifications",
        notificationsDesc: "Configure when and how to notify users",
        notificationChannels: "Notification Channels",
        emailChannel: "Email",
        smsChannel: "SMS",
        whatsappChannel: "WhatsApp",
        pushChannel: "Push Notifications (Mobile App)",
        notificationTypes: "Notification Types",

        // Notifications Management
        notificationsManagement: "Notifications Management",
        notificationsManagementDesc: "Create, edit and manage notifications for users",
        newNotification: "New Notification",
        editNotification: "Edit Notification",
        searchNotifications: "Search notifications...",
        allAudience: "All Audience",
        allCountries: "All Countries",
        allPriorities: "All Priorities",
        allLanguages: "All Languages",
        urgent: "Urgent",
        high: "High",
        normal: "Normal",
        low: "Low",
        expires: "Expires",
        notificationTitlePlaceholder: "Notification title",
        notificationMessagePlaceholder: "Notification message",
        type: "Type",
        text: "Text",
        video: "Video",
        audio: "Audio",
        videoUrl: "Video URL",
        audioUrl: "Audio URL",
        audience: "Audience",
        priority: "Priority",
        country: "Country",
        optional: "Optional",
        expirationDate: "Expiration Date",
        assignToUsers: "Assign to specific users",
        selectMultipleUsers: "Hold Ctrl/Cmd to select multiple users",
        notificationsList: "Notifications List",
        noNotifications: "No notifications",
        notificationSaved: "Notification saved successfully",
        notificationDeleted: "Notification deleted",
        confirmDeleteNotification: "Delete this notification?",
        errorLoadingNotifications: "Error loading notifications",
        errorSavingNotification: "Error saving notification",
        errorDeletingNotification: "Error deleting notification",
        inactive: "Inactive",
        newLessonAvailable: "New lesson available",
        activityReminder: "Pending activity reminder",
        lessonCompleted: "Congratulations for completing lesson",
        messageFromDiscipler: "Message from discipler",
        weeklyProgressSummary: "Weekly progress summary",

        // Communications
        communicationProviders: "Communication Providers",
        communicationProvidersDesc: "External services for sending messages",
        emailProvider: "Provider",
        apiKey: "API Key",
        customSMTP: "Custom SMTP",
        smsWhatsapp: "SMS and WhatsApp",
        accountSID: "Account SID",
        authToken: "Auth Token",
        whatsappBusinessNumber: "WhatsApp Business Number",
        whatsappBusinessNumberDesc: "Must be verified in WhatsApp Business API",

        // Appearance
        appearanceTitle: "Appearance",
        appearanceDesc: "Customize the visual appearance of the application",
        theme: "Theme",
        darkMode: "Dark mode",
        primaryColor: "Primary color",
        logo: "Logo",
        changeLogo: "Change Logo",
        logoRecommendation: "Recommended: 512x512px, PNG format with transparent background",

        // Buttons and actions
        saveChanges: "Save Changes",
        saving: "Saving...",
        saved: "Saved",
        changesWillApply: "Changes will apply immediately",

        // Common settings terms
        minutes: "minutes",
        hours: "hours",
        days: "days",
        enabled: "Enabled",
        disabled: "Disabled",
        select: "Select",
        configure: "Configure",
        test: "Test",
        testConnection: "Test connection",

        quizzes: "Quizzes",
        manageQuizzes: "Manage assessments",

        // Bible Studies
        bible_studies: "Bible Studies",
        interactive_guides: "Interactive Guides",
        bible_studies_subtitle: "Manage interactive study guides for each lesson",
        create_new_study: "Create New Study",
        total_lessons: "Total Lessons",
        with_study: "With Study",
        pending_studies: "Pending",
        bilingual: "Bilingual",
        search_lesson: "Search lesson by title or number...",
        expand_all: "Expand All",
        collapse_all: "Collapse All",
        main_series: "Main Series",
        series_word: "Series",
        lessons_word: "lessons",
        with_study_count: "with study",
        no_lessons_series: "No lessons in this series",
        study_complete: "Complete",
        study_external: "External",
        no_study: "No study",
        create_study: "Create/Edit Study",
        study_preview: "Study Preview",

    },
};

const LangCtx = createContext({ lang: "es", setLang: () => { }, t: (k) => k });

export function LangProvider({ children }) {
    const [lang, setLangState] = useState("es");

    useEffect(() => {
        // Primero intenta obtener el idioma guardado del login o admin
        const stored = typeof window !== "undefined" ? localStorage.getItem("admin_lang") : null;

        if (stored === "en" || stored === "es") {
            // Si hay un idioma guardado, √∫salo
            setLangState(stored);
        } else {
            // Si no hay idioma guardado, detecta por navegador
            const browserLang = typeof navigator !== "undefined" &&
                navigator.language?.toLowerCase().startsWith("en") ? "en" : "es";

            // Guarda el idioma detectado
            if (typeof window !== "undefined") {
                localStorage.setItem("admin_lang", browserLang);
            }

            setLangState(browserLang);
        }
    }, []);

    const setLang = (v) => {
        setLangState(v);
        if (typeof window !== "undefined") localStorage.setItem("admin_lang", v);
    };

    const t = (key) => (M[lang] && M[lang][key]) || key;
    const value = useMemo(() => ({ lang, setLang, t }), [lang]);

    return <LangCtx.Provider value={value}>{children}</LangCtx.Provider>;
}

export const useLang = () => useContext(LangCtx);

export default LangProvider;

export function LanguageSwitcher({ className = "" }) {
    const { lang, setLang, t } = useLang();
    return (
        <div className={`flex items-center gap-2 ${className}`}>
            <span className="text-sm text-neutral-600">{t("language")}:</span>
            <select
                value={lang}
                onChange={(e) => setLang(e.target.value)}
                className="border rounded px-2 py-1 text-sm"
            >
                <option value="es">{t("spanish")}</option>
                <option value="en">{t("english")}</option>
            </select>
        </div>
    );
}